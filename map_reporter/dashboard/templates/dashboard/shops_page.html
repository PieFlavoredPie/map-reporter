{% extends "dashboard_base.html" %}

{% load static %}

{% block title %}
Καταστήματα
{% endblock %}

{% block headEnd %}
<script src="{% static '/map_reporter/js/shop-page-data-table.js' %}"></script>
<style>
    label {
    padding: 5px;
}
#shops-table_wrapper{
    padding:5px;
}
</style>
{% endblock %}

{% block main %}

    <h1 class="mb-5">Καταστήματα</h1>
    <div class="container-fluid">
        <div class="row">
            <div class="col col-6">
                <h5 class="mb-4">
                   {% for product in all_products %}
                    {{product}} - 
                    {{product.prod_count}}<br>
                   {% endfor %}
                </h5>
            </div>
            <div class="col col-6">
                <div class="card mb-4">
                        <div class="card-header">
                            <i class="fas fa-chart-pie me-1"></i>
                            % Καταστημάτων που είναι οκ στην τιμή
                        </div>
                            <div class="card-body"><canvas id="myPieChart" width="100%" height="50"></canvas></div>
                            <div class="card-footer small text-muted">Updated yesterday at 11:59 PM</div>
                    </div>
                </div>
            </div>
        </div>      
    </div>    
    <div class="container-fluid mb-5">
        <div class="row">
            <div class="col col-2">
                <div class="card mb-4">
                    <div class="card-header mb-4">
                        <i class="fa-solid fa-filter"></i>
                        Φίλτρα
                    </div>
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Labore, asperiores! Ipsum ratione ullam dolorum? Ipsam molestiae, vel est, totam aliquid rem aut voluptatibus, sunt libero dignissimos modi nisi eos? Fugiat.
                </div>
            </div>
            <div class="col col-10">
                <div class="card mb-4">
                    <div class="card-header mb-4">
                        <i class="fas fa-table me-1"></i>
                        Καταστήματα
                    </div>
                        <table id='shops-table' class=''>
                            <thead>
                            <tr>
                                <th>Όνομα καταστήματος</th>
                                <th>Key Account</th>
                                <th># Προϊόντων</th>
                                <th>% σωστής τιμής</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for shop in shops %}
                            <tr>
                                <td>
                                    <a href="{% url 'shop_info' shop.id %}">
                                        {{shop.name}}
                                    </a> 
                                </td>                
                                <td>
                                    <p>
                                        {{shop.is_key_account}}
                                    </p> 
                                </td>
                                <td>
                                    <p>
                                        {{shop.prod_count}}
                                    </p> 
                                </td>
                                <td>
                                    <p>
                                        -
                                    </p> 
                                </td>
                            </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                </div>
            </div>
        </div>
    </div>
    </div>
  <script>
        Chart.defaults.global.defaultFontFamily = '-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif';
    Chart.defaults.global.defaultFontColor = '#292b2c';
            // Pie Chart Example
    var ctx = document.getElementById("myPieChart");
    var myPieChart = new Chart(ctx, {
    type: 'pie',
    data: {
        labels: ["Κάτω", "Ακριβώς", "Πάνω"],
        datasets: [{
        data: [30, 45, 25],
        //data: [{{shopsbelow}}, {{shopsequal}}, {{shopsabove}}],
        backgroundColor: ['#dc3545', '#28a745', '#ffc107'],
        }],
    },
    });


</script>
{% endblock %}